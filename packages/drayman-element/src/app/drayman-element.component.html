<ng-container *ngIf="viewTree">
    <!-- <ng-container *ngFor="let element of viewTree; trackBy: trackByFn"> -->
    <ng-container *ngTemplateOutlet="childrenTemplate; context: {children: viewTree}"></ng-container>
    <!-- </ng-container> -->
</ng-container>
<ng-template #childrenTemplate let-children="children">
    <ng-container *ngFor="let element of children; trackBy: trackByFn">
        <ng-container *ngIf="!isHtmlElement(element.type)">
            <ax-lazy-element [ngStyle]="element.style"
                *axLazyElementDynamic="element.type; url: config?.elementUrl + element.type;"
                [options]="element.options">
            </ax-lazy-element>
        </ng-container>
        <ng-container *ngIf="isHtmlElement(element.type)">
            <ng-container [ngSwitch]="element.type">
                <!--ELEMENTS-START-->
                <ng-container *ngSwitchCase="'h1'">
                    <h1 [ngStyle]="element.style" (keydown)="onShortcut($event, element)">
                        <ng-container *ngTemplateOutlet="childrenTemplate; context: {children: element.children}">
                        </ng-container>
                    </h1>
                </ng-container>
                <ng-container *ngSwitchCase="'h2'">
                    <h2 [ngStyle]="element.style" (keydown)="onShortcut($event, element)">
                        <ng-container *ngTemplateOutlet="childrenTemplate; context: {children: element.children}">
                        </ng-container>
                    </h2>
                </ng-container>
                <ng-container *ngSwitchCase="'h3'">
                    <h3 [ngStyle]="element.style" (keydown)="onShortcut($event, element)">
                        <ng-container *ngTemplateOutlet="childrenTemplate; context: {children: element.children}">
                        </ng-container>
                    </h3>
                </ng-container>
                <ng-container *ngSwitchCase="'h4'">
                    <h4 [ngStyle]="element.style" (keydown)="onShortcut($event, element)">
                        <ng-container *ngTemplateOutlet="childrenTemplate; context: {children: element.children}">
                        </ng-container>
                    </h4>
                </ng-container>
                <ng-container *ngSwitchCase="'h5'">
                    <h5 [ngStyle]="element.style" (keydown)="onShortcut($event, element)">
                        <ng-container *ngTemplateOutlet="childrenTemplate; context: {children: element.children}">
                        </ng-container>
                    </h5>
                </ng-container>
                <ng-container *ngSwitchCase="'h6'">
                    <h6 [ngStyle]="element.style" (keydown)="onShortcut($event, element)">
                        <ng-container *ngTemplateOutlet="childrenTemplate; context: {children: element.children}">
                        </ng-container>
                    </h6>
                </ng-container>
                <ng-container *ngSwitchCase="'div'">
                    <div [ngStyle]="element.style" (keydown)="onShortcut($event, element)">
                        <ng-container *ngTemplateOutlet="childrenTemplate; context: {children: element.children}">
                        </ng-container>
                    </div>
                </ng-container>
                <ng-container *ngSwitchCase="'span'">
                    <span [ngStyle]="element.style" (keydown)="onShortcut($event, element)">
                        <ng-container *ngTemplateOutlet="childrenTemplate; context: {children: element.children}">
                        </ng-container>
                    </span>
                </ng-container>
                <ng-container *ngSwitchCase="'table'">
                    <table [ngStyle]="element.style" (keydown)="onShortcut($event, element)">
                        <ng-container *ngTemplateOutlet="childrenTemplate; context: {children: element.children}">
                        </ng-container>
                    </table>
                </ng-container>
                <ng-container *ngSwitchCase="'td'">
                    <td [ngStyle]="element.style" (keydown)="onShortcut($event, element)"
                        (attr.colspan)="element.options.colspan" (attr.rowspan)="element.options.rowspan">
                        <ng-container *ngTemplateOutlet="childrenTemplate; context: {children: element.children}">
                        </ng-container>
                    </td>
                </ng-container>
                <ng-container *ngSwitchCase="'th'">
                    <th [ngStyle]="element.style" (keydown)="onShortcut($event, element)"
                        (attr.colspan)="element.options.colspan" (attr.rowspan)="element.options.rowspan">
                        <ng-container *ngTemplateOutlet="childrenTemplate; context: {children: element.children}">
                        </ng-container>
                    </th>
                </ng-container>
                <ng-container *ngSwitchCase="'tr'">
                    <tr [ngStyle]="element.style" (keydown)="onShortcut($event, element)">
                        <ng-container *ngTemplateOutlet="childrenTemplate; context: {children: element.children}">
                        </ng-container>
                    </tr>
                </ng-container>
                <ng-container *ngSwitchCase="'tbody'">
                    <tbody [ngStyle]="element.style" (keydown)="onShortcut($event, element)">
                        <ng-container *ngTemplateOutlet="childrenTemplate; context: {children: element.children}">
                        </ng-container>
                    </tbody>
                </ng-container>
                <ng-container *ngSwitchCase="'thead'">
                    <thead [ngStyle]="element.style" (keydown)="onShortcut($event, element)">
                        <ng-container *ngTemplateOutlet="childrenTemplate; context: {children: element.children}">
                        </ng-container>
                    </thead>
                </ng-container>
                <ng-container *ngSwitchCase="'tfoot'">
                    <tfoot [ngStyle]="element.style" (keydown)="onShortcut($event, element)">
                        <ng-container *ngTemplateOutlet="childrenTemplate; context: {children: element.children}">
                        </ng-container>
                    </tfoot>
                </ng-container>
                <ng-container *ngSwitchCase="'button'">
                    <button [ngStyle]="element.style" (keydown)="onShortcut($event, element)"
                        (click)="element.options.onClick()" [disabled]="element.options.disabled">
                        <ng-container *ngTemplateOutlet="childrenTemplate; context: {children: element.children}">
                        </ng-container>
                    </button>
                </ng-container>
                <ng-container *ngSwitchCase="'drayman-input-field'">
                    <app-drayman-input-field [ngStyle]="element.style" (keydown)="onShortcut($event, element)"
                        [options]="element.options">
                        <ng-container *ngTemplateOutlet="childrenTemplate; context: {children: element.children}">
                        </ng-container>
                    </app-drayman-input-field>
                </ng-container>
                <ng-container *ngSwitchCase="'img'">
                    <img [ngStyle]="element.style" (keydown)="onShortcut($event, element)" [src]="element.options.src"
                        [alt]="element.options.alt" />
                </ng-container>
                <!--ELEMENTS-END-->
                <ng-container *ngSwitchCase="'text'">
                    {{element.options.text}}
                </ng-container>
            </ng-container>
        </ng-container>
    </ng-container>
</ng-template>