/**
 * Creating a sidebar enables you to:
 - create an ordered group of docs
 - render a sidebar for each doc of that group
 - provide next/previous navigation

 The sidebars can be generated from the filesystem, or explicitly defined here.

 Create as many sidebars as you want.
 */
const fs = require('fs');

const blogContents = fs.readdirSync('./blog');

module.exports = {
  // By default, Docusaurus generates a sidebar from the docs folder structure
  tutorialSidebar: [
    { type: 'autogenerated', dirName: '.' },
    {
      type: 'category',
      label: 'Guides',
      items: blogContents.map(x => {
        const blogText = fs.readFileSync(`./blog/${x}`, 'utf-8').split('\n');
        const isGuide = blogText.find(x => x.startsWith('tags: ')).split(': ')[1].slice(1, -2).split(', ').includes('guide');
        if (isGuide) {
          const blogTitle = blogText.find(x => x.startsWith('title: ')).split(': ')[1];
          const blogSlug = blogText.find(x => x.startsWith('slug: ')).split(': ')[1];
          return {
            type: 'link',
            label: blogTitle,
            href: `/blog/${blogSlug}`, // The external URL
          }
        }
        return {};
      })
    },
  ],

  // But you can create a sidebar manually
  /*
  tutorialSidebar: [
    {
      type: 'category',
      label: 'Tutorial',
      items: ['hello'],
    },
  ],
   */
};
