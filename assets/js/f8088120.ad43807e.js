"use strict";(self.webpackChunk_drayman_docs=self.webpackChunk_drayman_docs||[]).push([[556],{3905:function(e,n,t){t.d(n,{Zo:function(){return m},kt:function(){return u}});var o=t(7294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function r(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);n&&(o=o.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,o)}return t}function i(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?r(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function c(e,n){if(null==e)return{};var t,o,a=function(e,n){if(null==e)return{};var t,o,a={},r=Object.keys(e);for(o=0;o<r.length;o++)t=r[o],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(o=0;o<r.length;o++)t=r[o],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var l=o.createContext({}),s=function(e){var n=o.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):i(i({},n),e)),t},m=function(e){var n=s(e.components);return o.createElement(l.Provider,{value:n},e.children)},p={inlineCode:"code",wrapper:function(e){var n=e.children;return o.createElement(o.Fragment,{},n)}},d=o.forwardRef((function(e,n){var t=e.components,a=e.mdxType,r=e.originalType,l=e.parentName,m=c(e,["components","mdxType","originalType","parentName"]),d=s(t),u=a,h=d["".concat(l,".").concat(u)]||d[u]||p[u]||r;return t?o.createElement(h,i(i({ref:n},m),{},{components:t})):o.createElement(h,i({ref:n},m))}));function u(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var r=t.length,i=new Array(r);i[0]=d;var c={};for(var l in n)hasOwnProperty.call(n,l)&&(c[l]=n[l]);c.originalType=e,c.mdxType="string"==typeof e?e:a,i[1]=c;for(var s=2;s<r;s++)i[s]=t[s];return o.createElement.apply(null,i)}return o.createElement.apply(null,t)}d.displayName="MDXCreateElement"},9084:function(e,n,t){t.d(n,{Z:function(){return d}});var o=t(7294),a="browserWindow_25XZ",r="browserWindowHeader_KqAw",i="buttons_1hjc",c="browserWindowAddressBar_3kU8",l="dot_3vUt",s="browserWindowMenuIcon_62Vr",m="bar_1GUQ",p="browserWindowBody_2pXR";var d=function(e){var n=e.children,t=e.minHeight,d=e.url;return o.createElement("div",{className:a,style:{minHeight:t}},o.createElement("div",{className:r},o.createElement("div",{className:i},o.createElement("span",{className:l,style:{background:"#f25f58"}}),o.createElement("span",{className:l,style:{background:"#fbbe3c"}}),o.createElement("span",{className:l,style:{background:"#58cb42"}})),o.createElement("div",{className:c},d),o.createElement("div",{className:s},o.createElement("div",null,o.createElement("span",{className:m}),o.createElement("span",{className:m}),o.createElement("span",{className:m})))),o.createElement("div",{className:p},n))}},4824:function(e,n,t){t.r(n),t.d(n,{frontMatter:function(){return l},contentTitle:function(){return s},metadata:function(){return m},toc:function(){return p},default:function(){return u}});var o=t(7462),a=t(3366),r=(t(7294),t(3905)),i=t(9084),c=["components"],l={title:"Component basics",sidebar_position:2},s=void 0,m={unversionedId:"introduction/component-basics",id:"introduction/component-basics",isDocsHomePage:!1,title:"Component basics",description:"The smallest Drayman component code looks like this:",source:"@site/docs/introduction/component-basics.mdx",sourceDirName:"introduction",slug:"/introduction/component-basics",permalink:"/docs/introduction/component-basics",editUrl:"https://github.com/Claviz/drayman/blob/main/docs/docs/introduction/component-basics.mdx",version:"current",sidebarPosition:2,frontMatter:{title:"Component basics",sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"Getting started",permalink:"/docs/introduction/getting-started"},next:{title:"Server and client combined",permalink:"/docs/introduction/server-and-client-combined"}},p=[{value:"Creating a component",id:"creating-a-component",children:[]},{value:"Using component in other component",id:"using-component-in-other-component",children:[]},{value:"Using component as web component",id:"using-component-as-web-component",children:[]}],d={toc:p};function u(e){var n=e.components,t=(0,a.Z)(e,c);return(0,r.kt)("wrapper",(0,o.Z)({},d,t,{components:n,mdxType:"MDXLayout"}),(0,r.kt)("p",null,"The smallest Drayman component code looks like this:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx"},"export const component: DraymanComponent = async () => {\n  return () => {\n    return <h1>Hello, world!</h1>;\n  };\n};\n")),(0,r.kt)("p",null,'It displays heading saying "Hello, world!":'),(0,r.kt)(i.Z,{url:"http://localhost:3033",mdxType:"BrowserWindow"},(0,r.kt)("h1",null,"Hello, world!")),(0,r.kt)("p",null,"In comparison to classic front-end frameworks, Drayman acts differently. Component data and methods are stored server-side. A user browser receives only JSON representation of what should be shown on a screen. This way a server-side code can be securely combined with UI code inside a single component script."),(0,r.kt)("h2",{id:"creating-a-component"},"Creating a component"),(0,r.kt)("p",null,"Every component should be placed under ",(0,r.kt)("inlineCode",{parentName:"p"},"src/components")," directory (this behavior can be changed in ",(0,r.kt)("a",{parentName:"p",href:"./configuration"},"configuration"),"). In fact, if you have already installed Drayman using ",(0,r.kt)("a",{parentName:"p",href:"./getting-started"},"Getting started guide"),', a "Hello, world!" component inside ',(0,r.kt)("inlineCode",{parentName:"p"},"home.tsx")," file is already placed there:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-bash"},"my-app\n\u2514\u2500\u2500 src\n   \u2514\u2500\u2500 components\n      \u2514\u2500\u2500 home.tsx\n")),(0,r.kt)("div",{className:"admonition admonition-caution alert alert--warning"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 16 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"}))),"caution")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"You must create separate file for each component."))),(0,r.kt)("p",null,"Let's create a simple component which increases counter on button click. Add a new file to ",(0,r.kt)("inlineCode",{parentName:"p"},"src/components")," directory called ",(0,r.kt)("inlineCode",{parentName:"p"},"counter.tsx"),". Add this code:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx",metastring:'title="src/components/counter.tsx"',title:'"src/components/counter.tsx"'},"export const component: DraymanComponent = async ({ forceUpdate }) => {\n  let count = 0;\n\n  return () => {\n    return (\n      <>\n        <h3>{count}</h3>\n        <button\n          onclick={async () => {\n            count++;\n            await forceUpdate();\n          }}\n        >\n          +1\n        </button>\n      </>\n    );\n  };\n};\n")),(0,r.kt)("p",null,"Now we need to show this component on a page. There are two ways of how to do it and they are described below."),(0,r.kt)("h2",{id:"using-component-in-other-component"},"Using component in other component"),(0,r.kt)("p",null,"As well as any HTML element, we can use created component from other components. Let's modify default ",(0,r.kt)("inlineCode",{parentName:"p"},"home.tsx")," component:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-tsx",metastring:'title="src/components/home.tsx"',title:'"src/components/home.tsx"'},"export const component: DraymanComponent = async () => {\n  return () => {\n    return (\n      <>\n        <h1>Hello, world!</h1>\n        // highlight-next-line\n        <counter />\n      </>\n    );\n  };\n};\n")),(0,r.kt)("p",null,"We have added ",(0,r.kt)("inlineCode",{parentName:"p"},"<counter />"),' and now in addition to "Hello, world!" text, ',(0,r.kt)("inlineCode",{parentName:"p"},"home.tsx")," displays our newly created counter component."),(0,r.kt)("div",{className:"admonition admonition-tip alert alert--success"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"}))),"tip")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("p",{parentName:"div"},"Components can also have properties. You can read about props ",(0,r.kt)("a",{parentName:"p",href:"../components-in-depth/helpers/props"},"here"),"."))),(0,r.kt)("h2",{id:"using-component-as-web-component"},"Using component as web component"),(0,r.kt)("p",null,"With Drayman, you can use created components anywhere on page. Any framework which allows web component usage, also can render Drayman component. This allows you to use server-side components in any environment."),(0,r.kt)("p",null,"If you have created a project using ",(0,r.kt)("a",{parentName:"p",href:"./getting-started"},"Getting started guide"),", starting point of application is located inside ",(0,r.kt)("inlineCode",{parentName:"p"},"public/index.html"),":"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html",metastring:'title="public/index.html"',title:'"public/index.html"'},'<!DOCTYPE html>\n<html>\n  <head>\n    <meta charset="utf-8" />\n    <meta http-equiv="X-UA-Compatible" content="IE=edge" />\n    <title>Drayman Framework</title>\n    <meta name="viewport" content="width=device-width, initial-scale=1" />\n    \x3c!-- highlight-next-line --\x3e\n    <script src="/drayman-framework-client.js"><\/script>\n  </head>\n\n  <body>\n    \x3c!-- highlight-next-line --\x3e\n    <drayman-element component="home"></drayman-element>\n\n    <script>\n      // highlight-next-line\n      initializeDraymanFramework();\n    <\/script>\n  </body>\n</html>\n')),(0,r.kt)("p",null,"As you can see:"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"A ",(0,r.kt)("inlineCode",{parentName:"li"},"drayman-framework-client.js")," script is loaded inside header."),(0,r.kt)("li",{parentName:"ol"},"It is initialized inside body using ",(0,r.kt)("inlineCode",{parentName:"li"},"initializeDraymanFramework()")," function."),(0,r.kt)("li",{parentName:"ol"},"Initial component ",(0,r.kt)("inlineCode",{parentName:"li"},"home.tsx")," is loaded using special web component called ",(0,r.kt)("inlineCode",{parentName:"li"},"drayman-element"),".")),(0,r.kt)("p",null,"You can pass any component name (without extension) from ",(0,r.kt)("inlineCode",{parentName:"p"},"src/components")," directory as an attribute. Let's do it for our ",(0,r.kt)("inlineCode",{parentName:"p"},"counter.tsx")," component:"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html",metastring:'title="public/index.html"',title:'"public/index.html"'},'<!DOCTYPE html>\n<html>\n  <head>\n    <meta charset="utf-8" />\n    <meta http-equiv="X-UA-Compatible" content="IE=edge" />\n    <title>Drayman Framework</title>\n    <meta name="viewport" content="width=device-width, initial-scale=1" />\n    <script src="/drayman-framework-client.js"><\/script>\n  </head>\n\n  <body>\n    <drayman-element component="home"></drayman-element>\n    \x3c!-- highlight-next-line --\x3e\n    <drayman-element component="counter"></drayman-element>\n\n    <script>\n      initializeDraymanFramework();\n    <\/script>\n  </body>\n</html>\n')),(0,r.kt)("p",null,'Now in addtion to "Hello, world!" component, a counter component is rendered on page.'))}u.isMDXComponent=!0}}]);